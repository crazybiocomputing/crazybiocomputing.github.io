<?php
	require('../../phpCrazy/cookie_check_crazybio.inc.php');
?>
<?php
	include('../../phpCrazy/header.inc.php');
?>
<link href='http://fonts.googleapis.com/css?family=Walter+Turncoat' rel='stylesheet' type='text/css'>

<style>

#bubble {
  position:absolute;
  left:0px;
  top:0px;
  background-color:white;
  border: 1px solid;
  border-radius: 5px;
  padding: 10px;
  margin: 0px;
}

#bubble p {
  margin:0px;
  padding: 0px;
  font-size: 14px;
}

.block label { 
  display: inline-block; 
  font-size:30px;
  width: 40px; 
  text-align: right; 
  top-margin: 5px;
}â€‹


</style>

<script type="text/javascript">
var sample=0;
var joker=false;
var emptybubble={'x':0,'y':0};

function doIt() {
  var dummyEvent = {'clientX':0, 'clientY':0};
  var x = document.getElementById('background').offsetLeft;
  var y = document.getElementById('background').offsetTop;
  myAlert(dummyEvent,'I am the boss',{'x':x+320,'y':y+20});
}


function room(event,v) {
  console.log(event);
  var ev = event || window.event;

  switch (v) {
  case 1: 
    myAlert(ev,'I found that the <b>Mouse</b> is more related to the <b>Sponge</b> than to the <b>Tomato</b>',emptybubble);
    break;
  case 2: 
    myAlert(ev,'... The <b>Tomato</b> and the <b>Fern</b> are closely related',emptybubble);
    break;
  case 3: 
    myAlert(ev,'We have 5 species: <b>Tomato</b>, <b>Fern</b>, <b>Sponge</b>, <b>Mouse</b>, and <b>Mushroom</b> ...and a partially drawn cladogram',emptybubble);
    break;
  case 4: 
    myAlert(ev,'\'d\' is the common ancestor to the <b>Mushroom</b> and to the <b>Sponge</b>',emptybubble);
    break;
  case 5: 
    if (joker) {
      var form = '<p>\"Where is the common ancestor ?...\"</p><form name="joker_form" method="post">';
      form    += '<label>Node:</label><input name="node" type="text" size="6"></input>';
      form    += '<input type="button" style="float:right;" value="OK" onclick="runForm2()"></input></form><br>';
      myAlert(ev,form,emptybubble);
    }
    else
      myAlert(ev,'Nothing.',emptybubble);
    break;
  case 6: 
    var win=window.open("http://en.wikipedia.org/wiki/Cladogram", '_blank');
    win.focus();
    break;
  case 7: myAlert(ev,'Here is the cladogram...<br><br><br><img src="tree.png"></src>',emptybubble);
    break;
  case 8: 
    var form = '<p>\"How do I complete this form?...\"</p><form name="bubble_form" method="post">';
    form    += '<div class="block"><label>&tridot;</label><input name="items[]" type="text" size="6"></input></div>';
    form    += '<div class="block"><label>&clubs; </label><input name="items[]" type="text" size="6"></input></div>';
    form    += '<div class="block"><label>&otimes;</label><input name="items[]" type="text" size="6"></input></div>';
    form    += '<div class="block"><label>&spades;</label><input name="items[]" type="text" size="6"></input></div>';
    form    += '<div class="block"><label>&olcir; </label><input name="items[]" type="text" size="6"></input><br>';
    form    += '<input type="button" style="float:right;" value="OK" onclick="runForm()"></input></form><br>';
    myAlert(ev,form,emptybubble);sample|=4;
    break;
  case 9: myAlert(ev,'I am the boss',emptybubble);sample|=16;break;
  }

}

function runForm() {
  var arr = document.bubble_form.elements['items[]'];
  var values=['mushroom','mouse','fern','tomato','sponge'];
  var dummyEvent = {'clientX':0, 'clientY':0};
  var x = document.getElementById('background').offsetLeft;
  var y = document.getElementById('background').offsetTop;
  var answer=0;
  for (var i=0;i< arr.length;i++) {
    if (arr[i].value.toLowerCase().trim() === values[i]) {
      answer +=Math.pow(2,i+1);
    }
    console.log(arr[i].value.toLowerCase().trim() );
  }

  if (answer == 62) {
    joker = true;
    myAlert(dummyEvent,'Congratulations!!<br>Now, last question:"This cladogram is unrooted. Which node (a, b, c, d, or e) is the common ancestor of the 5 species? "',{'x':x+320,'y':y+20});

  }
  else {
    myAlert(dummyEvent,'Oh Nooo!!, one (or several answers are wrong)... "',{'x':x+320,'y':y+20});
  }

}


function runForm2() {
  var dummyEvent = {'clientX':0, 'clientY':0};
  var x = document.getElementById('background').offsetLeft;
  var y = document.getElementById('background').offsetTop;

  if (document.joker_form.node.value.toLowerCase().trim() === 'c') {
    myAlert(dummyEvent,'<p style="font-size:30px"><a href="arabidopsis.php">Congratulations!!</a> You win...</p>',{'x':x+320,'y':y+20});

  }
  else {
    myAlert(dummyEvent,'Oh Nooo!!, the answer is desperitely wrong ... "',{'x':x+320,'y':y+20});
  }

}



function myAlert(ev,text,guy) {
  ev = ev || window.event;
  console.log('myAlert '+text+' '+ev.clientX+' '+ev.clientY);
  var bubble = document.getElementById('bubble');
  bubble.innerHTML='<p>'+text+'</p>';
  bubble.style.left= (ev.clientX + guy['x']) + 'px';
  bubble.style.top = (ev.clientY + guy['y']) + 'px';
}
</script>

<div id="page">
<div id="content">

<div id="samples" style="float:left"></div>
<div style="margin:auto">
<img id="background" src="background.png" width="700px" usemap="#room"></img>
</div>

<div id="bubble"></div>


<MAP NAME="room">
<AREA shape="poly" coords="570,100,632,106,652,296,520,278,532,173,564,168" href="javascript:void(0)" onclick="javascript:room(event,1)" ALT="collection" />
<AREA shape="poly" coords="445,157,485,161,494,296,351,282,353,175,386,164,392,97,449,103" href="javascript:void(0)" onclick="javascript:room(event,2)" ALT="collection" />
<AREA shape="poly" coords="318,3,320,67,381,160,348,176,342,238,242,270,202,246,212,74,263,57,264,3" href="javascript:void(0)" onclick="javascript:room(event,3)" ALT="collection" />
<AREA shape="poly" coords="214,282,72,339,57,239,86,210,46,172,129,142,143,202,175,208" href="javascript:void(0)" onclick="javascript:room(event,4)" ALT="collection" />
<AREA shape="poly" coords="373,304,430,291,469,330,402,353" href="javascript:void(0)" onclick="javascript:room(event,5)" ALT="collection" />
<AREA shape="poly" coords="349,327,407,367,341,405,277,358" href="javascript:void(0)" onclick="javascript:room(event,6)" ALT="collection" />
<AREA shape="poly" coords="479,343,561,359,479,441,397,415" href="javascript:void(0)" onclick="javascript:room(event,7)" ALT="collection" />
<AREA shape="poly" coords="220,300,280,369,183,405,128,334" href="javascript:void(0)" onclick="javascript:room(event,8)" ALT="collection" />
<AREA shape="poly" coords="272,160,294,168" href="javascript:void(0)" onclick="javascript:room(event,9)" ALT="collection" />
</MAP>
<br>


</div>


</div>
</div>

<?php
	include('../../phpCrazy/footer.inc.php');
?>
